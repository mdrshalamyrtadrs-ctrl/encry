<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>السنوات - منصة THE BEST</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo&display=swap');

/* ===== CSS كما هو بدون تغيير ===== */
body {
  font-family: 'Cairo', sans-serif;
  background: #121212;
  color: #fff;
  padding: 80px 15px 30px;
  margin: 0;
}

.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #111;
  padding: 10px 15px;
  color: white;
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  z-index: 1000;
}

h1 {
  color: #ffd700;
  text-align: center;
  font-size: 2.4rem;
  margin-bottom: 40px;
}

ul {
  list-style: none;
  padding: 0;
  max-width: 900px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 30px;
}

li {
  background: #1e1e1e;
  border-radius: 16px;
  padding: 20px 15px 30px;
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(255,215,0,0.15);
  transition: 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
}

li:hover {
  background: #ffd700;
  color: #121212;
  transform: translateY(-8px);
}

.circle {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: #333;
  overflow: hidden;
  margin-bottom: 18px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.circle img {
  width: 80%;
  height: 80%;
  object-fit: contain;
}

li span {
  font-weight: 700;
  font-size: 1.2rem;
  text-align: center;
}

li.loading {
  background: transparent;
  box-shadow: none;
  cursor: default;
  grid-column: 1 / -1;
  text-align: center;
  color: #aaa;
}
</style>
</head>

<body>

<div class="topbar">
  <div>☰</div>
  <div>السنوات</div>
  <div></div>
</div>

<h1>اختر السنة</h1>

<ul id="years-list">
  <li class="loading">⏳ Loading...</li>
</ul>

<script>
const yearsList = document.getElementById("years-list");

async function loadYears() {
  try {
    const res = await fetch("./organized_output-a.json");
    const data = await res.json();

    yearsList.innerHTML = "";

data.forEach(year => {
  const li = document.createElement("li");

  const circle = document.createElement("div");
  circle.className = "circle";

  const img = document.createElement("img");
  img.src = year.image_url || "https://img.icons8.com/ios-filled/100/ffd700/calendar.png";

  circle.appendChild(img);

  const span = document.createElement("span");
  span.textContent = year.name;

  // إضافة عدد المواد لكل سنة
  const info = document.createElement("div");
  info.style.fontSize = "0.9rem";
  info.style.color = "#ffd700";
  info.style.marginTop = "6px";
  info.textContent = `${year.subjects?.length || 0} مادة`;

  li.append(circle, span, info);

  li.onclick = () => {
    localStorage.setItem("selected_year", JSON.stringify(year));
    window.location.href = "subjects-a.html";
  };

  yearsList.appendChild(li);
});


  } catch (e) {
    console.error(e);
    yearsList.innerHTML =
      `<li class="loading">❌ خطأ في قراءة الملف</li>`;
  }
}

// تحميل السنوات فور فتح الصفحة
loadYears();
</script>

</body>
</html>
